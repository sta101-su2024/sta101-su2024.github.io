{
  "hash": "e1b571b80e9d1725163a7c478d30e70d",
  "result": {
    "markdown": "---\ntitle: \"2020 Durham City and County Resident Survey\"\ncategories: \n  - Application exercise\neditor: visual\n---\n\n\nThe main question we'll explore today is \"What are the demographics and priorities of City of Durham residents?\"\n\n# Goals\n\n-   Getting familiar with survey data\n\n-   Visualizing and summarizing categorical data\n\n-   Make connections between concepts of variable types in a study and variable types in R\n\n-   Exploring relationships between categorical variables\n\n-   Improving visualizations for visual appeal and better communication\n\n# Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n# Data\n\nThe data for this case study come from the 2020 Durham City and County Resident Survey.\n\nFirst, let's load the data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndurham <- read_csv(\"data/durham-2020.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 803 Columns: 49\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (7): please_define_other_32_5, primary_language, please_define_other_34...\ndbl (42): id, overall_quality_of_services_3_01, overall_quality_of_services_...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n# Visualizing and summarizing categorical data\n\n## Exercise 1\n\nHow many rows and columns are in this dataset? Answer in a full sentence using **inline code**. What does each row represent and what does each column represent?\n\n*Add your answer here.*\n\n## Exercise 2\n\nThe variables we'll use in this analysis are as follows. Rename the variables to the updated names shown below.\n\n| Original name                             | Updated name       |\n|-------------------------------------------|--------------------|\n| `primary_language`                        | `primary_language` |\n| `do_you_own_or_rent_your_current_resi_31` | `own_rent`         |\n| `would_you_say_your_total_annual_hous_35` | `income`           |\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Exercise 3\n\nWhat language do Durham residents speak: `primary_language`?\n\n> What is the primary language used in your household?\n\n*Add your answer here.*\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Exercise 4\n\nMake similar bar plots of `own_rent` and `income`. What distinct values do these variables take?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Exercise 5\n\nThe variables `own_rent` and `income` are both categorical, but they're stored as numbers. In R, categorical data are called **factor**s. *Recode* these variables as factors with the `as_factor()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Exercise 6\n\nRecreate the visualization from the `previous exercise`income\\` barplot, improving it for both visual appeal and better communication of findings.\n\n*Add your answer here.*\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Exercise 7\n\nRecreate the visualization from the previous exercise, but first calculate relative frequencies (proportions) of income (the **marginal distribution**) and plot the proportions instead of counts.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n# Visualizing relationships\n\n## Exercise 8\n\nVisualize and describe the relationship between income and home ownership of Durham residents.\n\n*Stretch goal:* Customize the colors using named colors from <http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf>.\n\n*Add your answer here.*\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Exercise 9\n\nCalculate the proportions of home owners for each category of Durham residents. Describe the relationship between these two variables, this time with the actual values from the **conditional distribution** of home ownership based on income level.\n\n*Add your answer here.*\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n## Exercise 10\n\n*Stretch goal:* Recode the **level**s of these two variables to be more informatively labeled and calculate the proportions from the previous exercise again.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# add code here\n```\n:::\n\n\n# Recap\n\n## Conceptual\n\nSome of the terms we introduced are:\n\n-   **Marginal distribution**: Distribution of a single variable.\n\n-   **Conditional distribution**: Distribution of a variable conditioned on the values (or levels, in the context of categorical data) of another.\n\n## R\n\nIn this application exercise we:\n\n-   Defined **factor**s -- the data type that R uses for categorical variables, i.e., variables that can take on values from a finite set of **level**s.\n\n\n```{=html}\n<!-- -->\n```\n\n-   Reviewed data imports, visualization, and wrangling functions encountered before:\n    -   Import: `read_csv()`: Read data from a CSV (comma separated values) file\n    -   Visualization:\n        -   `ggplot()`: Create a plot using the ggplot2 package\n        -   `aes()`: Map variables from the data to **aes**thetic elements of the plot, generally passed as an argument to `ggplot()` or to `geom_*()` functions (define only `x` **or** `y` aesthetic)\n        -   `geom_bar()`: Represent data with bars, after calculating heights of bars under the hood\n        -   `labs()`: Label `x` axis, `y` axis, legend for `color` of plot, title\\` of plot, etc.\n    -   Wrangling:\n        -   `mutate()`: Mutate the data frame by creating a new column or overwriting one of the existing columns\n        -   `count()`: Count the number of observations for each level of a categorical variable (factor) or each distinct value of any other type of variable\n        -   `group_by()`: Perform each subsequent action once per each group of the variable, where groups can be defined based on the levels of one or more variables\n-   Introduced new data wrangling functions:\n    -   `rename()`: Rename columns in a data frame\n    -   `as_factor()`: Convert a variable to a factor\n    -   `drop_na()`: Drop rows that have `NA` in one ore more specified variables\n    -   `if_else()`: Write logic for what happens if a condition is true and what happens if it's not\n    -   `case_when()`: Write a generalized `if_else()` logic for more than one codition\n-   Introduced new data visualization functions:\n    -   `geom_col()`: Represent data with bars (**col**umns), for heights that have already been calculated (must define `x` **and** `y` aesthetics)\n    -   `scale_fill_viridis_d()`: Customize the **d**iscrete `fill` scale, using a color-blind friendly, ordinal **d**iscrete color scale\n    -   `scale_y_discrete()`: Customize the discrete `y` scale\n    -   `scale_fill_manual()`: Customize the `fill` scale by manually adjusting values for colors\n\n## Quarto\n\nWe also introduced chunk options for managing figure sizes:\n\n-   `fig-width`: Width of figure\n-   `fig-asp`: Aspect ratio of figure (height / width)\n-   `fig-height`: Height of figure -- but I recommend using `fig-width` and `fig-asp`, instead of `fig-width` and `fig-height`\n\n# Acknowledgements\n\nThis dataset was cleaned and prepared for analysis by Duke StatSci PhD student [Sam Rosen](https://samgrosen.github.io/).\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}